[debug] [2023-08-31T13:10:26.101Z] ----------------------------------------------------------------------
[debug] [2023-08-31T13:10:26.104Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\Ristar\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2023-08-31T13:10:26.105Z] CLI Version:   12.5.2
[debug] [2023-08-31T13:10:26.106Z] Platform:      win32
[debug] [2023-08-31T13:10:26.106Z] Node Version:  v18.16.0
[debug] [2023-08-31T13:10:26.107Z] Time:          Thu Aug 31 2023 15:10:26 GMT+0200 (South Africa Standard Time)
[debug] [2023-08-31T13:10:26.107Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-08-31T13:10:26.204Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-08-31T13:10:26.204Z] > authorizing via signed-in user (mochochokoboiketlo@gmail.com)
[debug] [2023-08-31T13:10:26.204Z] [iam] checking project booking-hotel-25ea1 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-08-31T13:10:26.206Z] > refreshing access token with scopes: []
[debug] [2023-08-31T13:10:26.208Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2023-08-31T13:10:26.208Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-08-31T13:10:26.729Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2023-08-31T13:10:26.729Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-08-31T13:10:26.821Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions [none]
[debug] [2023-08-31T13:10:26.821Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:10:26.822Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-08-31T13:10:28.778Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions 200
[debug] [2023-08-31T13:10:28.779Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-08-31T13:10:28.780Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-08-31T13:10:28.780Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-08-31T13:10:30.680Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-08-31T13:10:30.681Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'booking-hotel-25ea1'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] +  functions: Finished running predeploy script. 
[debug] [2023-08-31T13:10:37.875Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1 [none]
[debug] [2023-08-31T13:10:38.475Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1 200
[debug] [2023-08-31T13:10:38.475Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1 {"projectId":"booking-hotel-25ea1","projectNumber":"1058852926243","displayName":"booking hotel","name":"projects/booking-hotel-25ea1","resources":{"hostingSite":"booking-hotel-25ea1"},"state":"ACTIVE","etag":"1_db74b228-bc32-47bd-ada3-c2cc405adecb"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-08-31T13:10:38.481Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com [none]
[debug] [2023-08-31T13:10:38.481Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:10:38.483Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com [none]
[debug] [2023-08-31T13:10:38.483Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:10:38.484Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com [none]
[debug] [2023-08-31T13:10:38.484Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:10:38.485Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com [none]
[debug] [2023-08-31T13:10:38.485Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:10:40.614Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com 200
[debug] [2023-08-31T13:10:40.615Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-08-31T13:10:40.643Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com 200
[debug] [2023-08-31T13:10:40.644Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-08-31T13:10:40.675Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com 200
[debug] [2023-08-31T13:10:40.675Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-08-31T13:10:40.705Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com 200
[debug] [2023-08-31T13:10:40.706Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-08-31T13:10:40.708Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1/adminSdkConfig [none]
[debug] [2023-08-31T13:10:41.270Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1/adminSdkConfig 200
[debug] [2023-08-31T13:10:41.270Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1/adminSdkConfig {"projectId":"booking-hotel-25ea1","storageBucket":"booking-hotel-25ea1.appspot.com"}
[debug] [2023-08-31T13:10:41.272Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs [none]
[debug] [2023-08-31T13:10:41.968Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs 200
[debug] [2023-08-31T13:10:41.968Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs {"configs":[{"name":"projects/booking-hotel-25ea1/configs/mongodb"},{"name":"projects/booking-hotel-25ea1/configs/stripe"}]}
[debug] [2023-08-31T13:10:41.970Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables [none]
[debug] [2023-08-31T13:10:41.975Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables [none]
[debug] [2023-08-31T13:10:42.528Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables 200
[debug] [2023-08-31T13:10:42.529Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables {"variables":[{"name":"projects/booking-hotel-25ea1/configs/mongodb/variables/uri","updateTime":"2023-08-30T07:08:05.232463980Z"}]}
[debug] [2023-08-31T13:10:42.529Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables/uri [none]
[debug] [2023-08-31T13:10:42.555Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables 200
[debug] [2023-08-31T13:10:42.555Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables {"variables":[{"name":"projects/booking-hotel-25ea1/configs/stripe/variables/private_key","updateTime":"2023-08-30T07:08:02.829569245Z"},{"name":"projects/booking-hotel-25ea1/configs/stripe/variables/privatekey","updateTime":"2023-08-30T07:29:25.941818845Z"}]}
[debug] [2023-08-31T13:10:42.555Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/private_key [none]
[debug] [2023-08-31T13:10:42.557Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/privatekey [none]
[debug] [2023-08-31T13:10:43.078Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/privatekey 200
[debug] [2023-08-31T13:10:43.078Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/privatekey {"name":"projects/booking-hotel-25ea1/configs/stripe/variables/privatekey","updateTime":"2023-08-30T07:29:25.941818845Z","text":"sk_test_51NYoi5AndaV81xG1VJdCLTC9cRI0paqZz38AR9NE1TsOANlSR08dZsrxMoyyMLK9CMFXORBbf2PNmnXCLLtUTCQU00UhRj5nCb"}
[debug] [2023-08-31T13:10:43.094Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/private_key 200
[debug] [2023-08-31T13:10:43.095Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/private_key {"name":"projects/booking-hotel-25ea1/configs/stripe/variables/private_key","updateTime":"2023-08-30T07:08:02.829569245Z","text":"sk_test_51NYoi5AndaV81xG1VJdCLTC9cRI0paqZz38AR9NE1TsOANlSR08dZsrxMoyyMLK9CMFXORBbf2PNmnXCLLtUTCQU00UhRj5nCb"}
[debug] [2023-08-31T13:10:43.119Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables/uri 200
[debug] [2023-08-31T13:10:43.119Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables/uri {"name":"projects/booking-hotel-25ea1/configs/mongodb/variables/uri","updateTime":"2023-08-30T07:08:05.232463980Z","text":"mongodb+srv://boiketlo:wlAng9qDc0ZoIA8C@cluster0.jvdtm2c.mongodb.net/hotel?retryWrites=true&w=majority"}
[debug] [2023-08-31T13:10:43.122Z] Validating nodejs source
[debug] [2023-08-31T13:10:44.826Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "body-parser": "^1.20.2",
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "mongoose": "^7.5.0",
    "morgan": "^1.10.0",
    "strip": "^3.0.0",
    "stripe": "^13.3.0"
  },
  "devDependencies": {
    "@babel/plugin-proposal-private-property-in-object": "^7.21.11",
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-08-31T13:10:44.827Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2023-08-31T13:10:44.828Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-08-31T13:10:44.836Z] Found firebase-functions binary at 'C:\Users\Ristar\Desktop\Project\hotel-booking-app\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8173

[error] node:events:491
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1740:16)
    at listenInCluster (node:net:1788:12)
    at Server.listen (node:net:1876:7)
    at Function.listen (C:\Users\Ristar\Desktop\Project\hotel-booking-app\functions\node_modules\express\lib\application.js:635:24)
    at Object.<anonymous> (C:\Users\Ristar\Desktop\Project\hotel-booking-app\functions\index.js:251:5)
    at Module._compile (node:internal/modules/cjs/loader:1254:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1308:10)
    at Module.load (node:internal/modules/cjs/loader:1117:32)
    at Module._load (node:internal/modules/cjs/loader:958:12)
    at Module.require (node:internal/modules/cjs/loader:1141:19)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1767:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '::',
  port: 8000
}

Node.js v18.16.0

[debug] [2023-08-31T13:10:45.595Z] Failed to call quitquitquit. This often means the server failed to start request to http://localhost:8173/__/quitquitquit failed, reason: connect ECONNREFUSED ::1:8173 {"message":"request to http://localhost:8173/__/quitquitquit failed, reason: connect ECONNREFUSED ::1:8173","type":"system","errno":"ECONNREFUSED","code":"ECONNREFUSED"}
[debug] [2023-08-31T13:10:46.001Z] FetchError: request to http://127.0.0.1:8173/__/functions.yaml failed, reason: read ECONNRESET
    at ClientRequest.<anonymous> (C:\Users\Ristar\AppData\Roaming\npm\node_modules\firebase-tools\node_modules\node-fetch\lib\index.js:1501:11)
    at ClientRequest.emit (node:events:513:28)
    at ClientRequest.emit (node:domain:489:12)
    at Socket.socketErrorListener (node:_http_client:502:9)
    at Socket.emit (node:events:513:28)
    at Socket.emit (node:domain:489:12)
    at emitErrorNT (node:internal/streams/destroy:151:8)
    at emitErrorCloseNT (node:internal/streams/destroy:116:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)
[error] 
[error] Error: An unexpected error has occurred.
[debug] [2023-08-31T13:12:49.705Z] ----------------------------------------------------------------------
[debug] [2023-08-31T13:12:49.707Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\Ristar\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2023-08-31T13:12:49.707Z] CLI Version:   12.5.2
[debug] [2023-08-31T13:12:49.707Z] Platform:      win32
[debug] [2023-08-31T13:12:49.708Z] Node Version:  v18.16.0
[debug] [2023-08-31T13:12:49.709Z] Time:          Thu Aug 31 2023 15:12:49 GMT+0200 (South Africa Standard Time)
[debug] [2023-08-31T13:12:49.709Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-08-31T13:12:49.800Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-08-31T13:12:49.801Z] > authorizing via signed-in user (mochochokoboiketlo@gmail.com)
[debug] [2023-08-31T13:12:49.801Z] [iam] checking project booking-hotel-25ea1 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-08-31T13:12:49.804Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions [none]
[debug] [2023-08-31T13:12:49.804Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:12:49.804Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-08-31T13:12:50.352Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions 200
[debug] [2023-08-31T13:12:50.352Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-08-31T13:12:50.352Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-08-31T13:12:50.352Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-08-31T13:12:52.076Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-08-31T13:12:52.077Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'booking-hotel-25ea1'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] +  functions: Finished running predeploy script. 
[debug] [2023-08-31T13:12:58.041Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1 [none]
[debug] [2023-08-31T13:12:58.602Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1 200
[debug] [2023-08-31T13:12:58.603Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1 {"projectId":"booking-hotel-25ea1","projectNumber":"1058852926243","displayName":"booking hotel","name":"projects/booking-hotel-25ea1","resources":{"hostingSite":"booking-hotel-25ea1"},"state":"ACTIVE","etag":"1_db74b228-bc32-47bd-ada3-c2cc405adecb"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-08-31T13:12:58.606Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com [none]
[debug] [2023-08-31T13:12:58.606Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:12:58.608Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com [none]
[debug] [2023-08-31T13:12:58.608Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:12:58.610Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com [none]
[debug] [2023-08-31T13:12:58.610Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:12:58.611Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com [none]
[debug] [2023-08-31T13:12:58.611Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:13:00.654Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com 200
[debug] [2023-08-31T13:13:00.654Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-08-31T13:13:00.654Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com 200
[debug] [2023-08-31T13:13:00.654Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-08-31T13:13:00.657Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com 200
[debug] [2023-08-31T13:13:00.657Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-08-31T13:13:00.660Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com 200
[debug] [2023-08-31T13:13:00.660Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-08-31T13:13:00.661Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1/adminSdkConfig [none]
[debug] [2023-08-31T13:13:01.204Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1/adminSdkConfig 200
[debug] [2023-08-31T13:13:01.204Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1/adminSdkConfig {"projectId":"booking-hotel-25ea1","storageBucket":"booking-hotel-25ea1.appspot.com"}
[debug] [2023-08-31T13:13:01.206Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs [none]
[debug] [2023-08-31T13:13:01.747Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs 200
[debug] [2023-08-31T13:13:01.747Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs {"configs":[{"name":"projects/booking-hotel-25ea1/configs/mongodb"},{"name":"projects/booking-hotel-25ea1/configs/stripe"}]}
[debug] [2023-08-31T13:13:01.748Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables [none]
[debug] [2023-08-31T13:13:01.752Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables [none]
[debug] [2023-08-31T13:13:02.280Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables 200
[debug] [2023-08-31T13:13:02.281Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables {"variables":[{"name":"projects/booking-hotel-25ea1/configs/stripe/variables/private_key","updateTime":"2023-08-30T07:08:02.829569245Z"},{"name":"projects/booking-hotel-25ea1/configs/stripe/variables/privatekey","updateTime":"2023-08-30T07:29:25.941818845Z"}]}
[debug] [2023-08-31T13:13:02.282Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/private_key [none]
[debug] [2023-08-31T13:13:02.286Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/privatekey [none]
[debug] [2023-08-31T13:13:02.783Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/private_key 200
[debug] [2023-08-31T13:13:02.783Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/private_key {"name":"projects/booking-hotel-25ea1/configs/stripe/variables/private_key","updateTime":"2023-08-30T07:08:02.829569245Z","text":"sk_test_51NYoi5AndaV81xG1VJdCLTC9cRI0paqZz38AR9NE1TsOANlSR08dZsrxMoyyMLK9CMFXORBbf2PNmnXCLLtUTCQU00UhRj5nCb"}
[debug] [2023-08-31T13:13:02.930Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/privatekey 200
[debug] [2023-08-31T13:13:02.930Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/privatekey {"name":"projects/booking-hotel-25ea1/configs/stripe/variables/privatekey","updateTime":"2023-08-30T07:29:25.941818845Z","text":"sk_test_51NYoi5AndaV81xG1VJdCLTC9cRI0paqZz38AR9NE1TsOANlSR08dZsrxMoyyMLK9CMFXORBbf2PNmnXCLLtUTCQU00UhRj5nCb"}
[debug] [2023-08-31T13:13:03.039Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables 200
[debug] [2023-08-31T13:13:03.040Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables {"variables":[{"name":"projects/booking-hotel-25ea1/configs/mongodb/variables/uri","updateTime":"2023-08-30T07:08:05.232463980Z"}]}
[debug] [2023-08-31T13:13:03.040Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables/uri [none]
[debug] [2023-08-31T13:13:03.569Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables/uri 200
[debug] [2023-08-31T13:13:03.569Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables/uri {"name":"projects/booking-hotel-25ea1/configs/mongodb/variables/uri","updateTime":"2023-08-30T07:08:05.232463980Z","text":"mongodb+srv://boiketlo:wlAng9qDc0ZoIA8C@cluster0.jvdtm2c.mongodb.net/hotel?retryWrites=true&w=majority"}
[debug] [2023-08-31T13:13:03.573Z] Validating nodejs source
[debug] [2023-08-31T13:13:04.963Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "body-parser": "^1.20.2",
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "mongoose": "^7.5.0",
    "morgan": "^1.10.0",
    "strip": "^3.0.0",
    "stripe": "^13.3.0"
  },
  "devDependencies": {
    "@babel/plugin-proposal-private-property-in-object": "^7.21.11",
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-08-31T13:13:04.963Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2023-08-31T13:13:04.965Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-08-31T13:13:04.972Z] Found firebase-functions binary at 'C:\Users\Ristar\Desktop\Project\hotel-booking-app\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8757

[error] node:events:491
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1740:16)
    at listenInCluster (node:net:1788:12)
    at Server.listen (node:net:1876:7)
    at Function.listen (C:\Users\Ristar\Desktop\Project\hotel-booking-app\functions\node_modules\express\lib\application.js:635:24)
    at Object.<anonymous> (C:\Users\Ristar\Desktop\Project\hotel-booking-app\functions\index.js:251:5)
    at Module._compile (node:internal/modules/cjs/loader:1254:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1308:10)
    at Module.load (node:internal/modules/cjs/loader:1117:32)
    at Module._load (node:internal/modules/cjs/loader:958:12)
    at Module.require (node:internal/modules/cjs/loader:1141:19)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1767:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '::',
  port: 8000
}

Node.js v18.16.0

[debug] [2023-08-31T13:13:05.788Z] Failed to call quitquitquit. This often means the server failed to start request to http://localhost:8757/__/quitquitquit failed, reason: connect ECONNREFUSED ::1:8757 {"message":"request to http://localhost:8757/__/quitquitquit failed, reason: connect ECONNREFUSED ::1:8757","type":"system","errno":"ECONNREFUSED","code":"ECONNREFUSED"}
[debug] [2023-08-31T13:13:06.189Z] FetchError: request to http://127.0.0.1:8757/__/functions.yaml failed, reason: read ECONNRESET
    at ClientRequest.<anonymous> (C:\Users\Ristar\AppData\Roaming\npm\node_modules\firebase-tools\node_modules\node-fetch\lib\index.js:1501:11)
    at ClientRequest.emit (node:events:513:28)
    at ClientRequest.emit (node:domain:489:12)
    at Socket.socketErrorListener (node:_http_client:502:9)
    at Socket.emit (node:events:513:28)
    at Socket.emit (node:domain:489:12)
    at emitErrorNT (node:internal/streams/destroy:151:8)
    at emitErrorCloseNT (node:internal/streams/destroy:116:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)
[error] 
[error] Error: An unexpected error has occurred.
[debug] [2023-08-31T13:13:51.357Z] ----------------------------------------------------------------------
[debug] [2023-08-31T13:13:51.359Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\Ristar\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2023-08-31T13:13:51.359Z] CLI Version:   12.5.2
[debug] [2023-08-31T13:13:51.360Z] Platform:      win32
[debug] [2023-08-31T13:13:51.360Z] Node Version:  v18.16.0
[debug] [2023-08-31T13:13:51.361Z] Time:          Thu Aug 31 2023 15:13:51 GMT+0200 (South Africa Standard Time)
[debug] [2023-08-31T13:13:51.361Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-08-31T13:13:51.455Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-08-31T13:13:51.456Z] > authorizing via signed-in user (mochochokoboiketlo@gmail.com)
[debug] [2023-08-31T13:13:51.456Z] [iam] checking project booking-hotel-25ea1 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-08-31T13:13:51.458Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions [none]
[debug] [2023-08-31T13:13:51.458Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:13:51.459Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-08-31T13:13:53.325Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions 200
[debug] [2023-08-31T13:13:53.326Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-08-31T13:13:53.326Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-08-31T13:13:53.326Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-08-31T13:13:55.035Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-08-31T13:13:55.035Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'booking-hotel-25ea1'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] +  functions: Finished running predeploy script. 
[debug] [2023-08-31T13:14:01.054Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1 [none]
[debug] [2023-08-31T13:14:01.624Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1 200
[debug] [2023-08-31T13:14:01.624Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1 {"projectId":"booking-hotel-25ea1","projectNumber":"1058852926243","displayName":"booking hotel","name":"projects/booking-hotel-25ea1","resources":{"hostingSite":"booking-hotel-25ea1"},"state":"ACTIVE","etag":"1_db74b228-bc32-47bd-ada3-c2cc405adecb"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-08-31T13:14:01.627Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com [none]
[debug] [2023-08-31T13:14:01.627Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:14:01.629Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com [none]
[debug] [2023-08-31T13:14:01.629Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:14:01.630Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com [none]
[debug] [2023-08-31T13:14:01.630Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:14:01.630Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com [none]
[debug] [2023-08-31T13:14:01.631Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:14:03.599Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com 200
[debug] [2023-08-31T13:14:03.599Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-08-31T13:14:03.652Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com 200
[debug] [2023-08-31T13:14:03.652Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-08-31T13:14:03.658Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com 200
[debug] [2023-08-31T13:14:03.658Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-08-31T13:14:03.729Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com 200
[debug] [2023-08-31T13:14:03.730Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-08-31T13:14:03.732Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1/adminSdkConfig [none]
[debug] [2023-08-31T13:14:04.297Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1/adminSdkConfig 200
[debug] [2023-08-31T13:14:04.297Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1/adminSdkConfig {"projectId":"booking-hotel-25ea1","storageBucket":"booking-hotel-25ea1.appspot.com"}
[debug] [2023-08-31T13:14:04.298Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs [none]
[debug] [2023-08-31T13:14:04.837Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs 200
[debug] [2023-08-31T13:14:04.838Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs {"configs":[{"name":"projects/booking-hotel-25ea1/configs/mongodb"},{"name":"projects/booking-hotel-25ea1/configs/stripe"}]}
[debug] [2023-08-31T13:14:04.839Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables [none]
[debug] [2023-08-31T13:14:04.841Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables [none]
[debug] [2023-08-31T13:14:05.385Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables 200
[debug] [2023-08-31T13:14:05.385Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables {"variables":[{"name":"projects/booking-hotel-25ea1/configs/mongodb/variables/uri","updateTime":"2023-08-30T07:08:05.232463980Z"}]}
[debug] [2023-08-31T13:14:05.386Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables/uri [none]
[debug] [2023-08-31T13:14:05.485Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables 200
[debug] [2023-08-31T13:14:05.486Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables {"variables":[{"name":"projects/booking-hotel-25ea1/configs/stripe/variables/privatekey","updateTime":"2023-08-30T07:29:25.941818845Z"},{"name":"projects/booking-hotel-25ea1/configs/stripe/variables/private_key","updateTime":"2023-08-30T07:08:02.829569245Z"}]}
[debug] [2023-08-31T13:14:05.486Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/privatekey [none]
[debug] [2023-08-31T13:14:05.491Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/private_key [none]
[debug] [2023-08-31T13:14:05.906Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables/uri 200
[debug] [2023-08-31T13:14:05.907Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables/uri {"name":"projects/booking-hotel-25ea1/configs/mongodb/variables/uri","updateTime":"2023-08-30T07:08:05.232463980Z","text":"mongodb+srv://boiketlo:wlAng9qDc0ZoIA8C@cluster0.jvdtm2c.mongodb.net/hotel?retryWrites=true&w=majority"}
[debug] [2023-08-31T13:14:06.022Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/private_key 200
[debug] [2023-08-31T13:14:06.022Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/private_key {"name":"projects/booking-hotel-25ea1/configs/stripe/variables/private_key","updateTime":"2023-08-30T07:08:02.829569245Z","text":"sk_test_51NYoi5AndaV81xG1VJdCLTC9cRI0paqZz38AR9NE1TsOANlSR08dZsrxMoyyMLK9CMFXORBbf2PNmnXCLLtUTCQU00UhRj5nCb"}
[debug] [2023-08-31T13:14:06.100Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/privatekey 200
[debug] [2023-08-31T13:14:06.101Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/privatekey {"name":"projects/booking-hotel-25ea1/configs/stripe/variables/privatekey","updateTime":"2023-08-30T07:29:25.941818845Z","text":"sk_test_51NYoi5AndaV81xG1VJdCLTC9cRI0paqZz38AR9NE1TsOANlSR08dZsrxMoyyMLK9CMFXORBbf2PNmnXCLLtUTCQU00UhRj5nCb"}
[debug] [2023-08-31T13:14:06.105Z] Validating nodejs source
[debug] [2023-08-31T13:14:07.564Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "body-parser": "^1.20.2",
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "mongoose": "^7.5.0",
    "morgan": "^1.10.0",
    "strip": "^3.0.0",
    "stripe": "^13.3.0"
  },
  "devDependencies": {
    "@babel/plugin-proposal-private-property-in-object": "^7.21.11",
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-08-31T13:14:07.564Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2023-08-31T13:14:07.566Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-08-31T13:14:07.573Z] Found firebase-functions binary at 'C:\Users\Ristar\Desktop\Project\hotel-booking-app\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8190

[error] node:events:491
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1740:16)
    at listenInCluster (node:net:1788:12)
    at Server.listen (node:net:1876:7)
    at Function.listen (C:\Users\Ristar\Desktop\Project\hotel-booking-app\functions\node_modules\express\lib\application.js:635:24)
    at Object.<anonymous> (C:\Users\Ristar\Desktop\Project\hotel-booking-app\functions\index.js:251:5)
    at Module._compile (node:internal/modules/cjs/loader:1254:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1308:10)
    at Module.load (node:internal/modules/cjs/loader:1117:32)
    at Module._load (node:internal/modules/cjs/loader:958:12)
    at Module.require (node:internal/modules/cjs/loader:1141:19)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1767:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '::',
  port: 8000
}

Node.js v18.16.0

[debug] [2023-08-31T13:14:08.310Z] Failed to call quitquitquit. This often means the server failed to start request to http://localhost:8190/__/quitquitquit failed, reason: connect ECONNREFUSED ::1:8190 {"message":"request to http://localhost:8190/__/quitquitquit failed, reason: connect ECONNREFUSED ::1:8190","type":"system","errno":"ECONNREFUSED","code":"ECONNREFUSED"}
[debug] [2023-08-31T13:14:08.703Z] FetchError: request to http://127.0.0.1:8190/__/functions.yaml failed, reason: read ECONNRESET
    at ClientRequest.<anonymous> (C:\Users\Ristar\AppData\Roaming\npm\node_modules\firebase-tools\node_modules\node-fetch\lib\index.js:1501:11)
    at ClientRequest.emit (node:events:513:28)
    at ClientRequest.emit (node:domain:489:12)
    at Socket.socketErrorListener (node:_http_client:502:9)
    at Socket.emit (node:events:513:28)
    at Socket.emit (node:domain:489:12)
    at emitErrorNT (node:internal/streams/destroy:151:8)
    at emitErrorCloseNT (node:internal/streams/destroy:116:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)
[error] 
[error] Error: An unexpected error has occurred.
[debug] [2023-08-31T13:14:43.182Z] ----------------------------------------------------------------------
[debug] [2023-08-31T13:14:43.184Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\Ristar\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2023-08-31T13:14:43.185Z] CLI Version:   12.5.2
[debug] [2023-08-31T13:14:43.185Z] Platform:      win32
[debug] [2023-08-31T13:14:43.185Z] Node Version:  v18.16.0
[debug] [2023-08-31T13:14:43.186Z] Time:          Thu Aug 31 2023 15:14:43 GMT+0200 (South Africa Standard Time)
[debug] [2023-08-31T13:14:43.186Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-08-31T13:14:43.259Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-08-31T13:14:43.259Z] > authorizing via signed-in user (mochochokoboiketlo@gmail.com)
[debug] [2023-08-31T13:14:43.259Z] [iam] checking project booking-hotel-25ea1 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2023-08-31T13:14:43.262Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions [none]
[debug] [2023-08-31T13:14:43.262Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:14:43.262Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-08-31T13:14:45.102Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions 200
[debug] [2023-08-31T13:14:45.102Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/booking-hotel-25ea1:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2023-08-31T13:14:45.103Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-08-31T13:14:45.103Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-08-31T13:14:46.817Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-08-31T13:14:46.817Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/booking-hotel-25ea1/serviceAccounts/booking-hotel-25ea1@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'booking-hotel-25ea1'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] +  functions: Finished running predeploy script. 
[debug] [2023-08-31T13:14:52.866Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1 [none]
[debug] [2023-08-31T13:14:53.474Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1 200
[debug] [2023-08-31T13:14:53.474Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1 {"projectId":"booking-hotel-25ea1","projectNumber":"1058852926243","displayName":"booking hotel","name":"projects/booking-hotel-25ea1","resources":{"hostingSite":"booking-hotel-25ea1"},"state":"ACTIVE","etag":"1_db74b228-bc32-47bd-ada3-c2cc405adecb"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-08-31T13:14:53.479Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com [none]
[debug] [2023-08-31T13:14:53.479Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:14:53.480Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com [none]
[debug] [2023-08-31T13:14:53.480Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:14:53.481Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com [none]
[debug] [2023-08-31T13:14:53.481Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:14:53.482Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com [none]
[debug] [2023-08-31T13:14:53.482Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com x-goog-quota-user=projects/booking-hotel-25ea1
[debug] [2023-08-31T13:14:55.435Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com 200
[debug] [2023-08-31T13:14:55.435Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-08-31T13:14:55.448Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com 200
[debug] [2023-08-31T13:14:55.448Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-08-31T13:14:55.478Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com 200
[debug] [2023-08-31T13:14:55.478Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-08-31T13:14:55.584Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com 200
[debug] [2023-08-31T13:14:55.584Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/booking-hotel-25ea1/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-08-31T13:14:55.585Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1/adminSdkConfig [none]
[debug] [2023-08-31T13:14:56.118Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1/adminSdkConfig 200
[debug] [2023-08-31T13:14:56.118Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/booking-hotel-25ea1/adminSdkConfig {"projectId":"booking-hotel-25ea1","storageBucket":"booking-hotel-25ea1.appspot.com"}
[debug] [2023-08-31T13:14:56.120Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs [none]
[debug] [2023-08-31T13:14:56.642Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs 200
[debug] [2023-08-31T13:14:56.643Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs {"configs":[{"name":"projects/booking-hotel-25ea1/configs/mongodb"},{"name":"projects/booking-hotel-25ea1/configs/stripe"}]}
[debug] [2023-08-31T13:14:56.645Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables [none]
[debug] [2023-08-31T13:14:56.647Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables [none]
[debug] [2023-08-31T13:14:57.168Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables 200
[debug] [2023-08-31T13:14:57.169Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables {"variables":[{"name":"projects/booking-hotel-25ea1/configs/stripe/variables/private_key","updateTime":"2023-08-30T07:08:02.829569245Z"},{"name":"projects/booking-hotel-25ea1/configs/stripe/variables/privatekey","updateTime":"2023-08-30T07:29:25.941818845Z"}]}
[debug] [2023-08-31T13:14:57.170Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/private_key [none]
[debug] [2023-08-31T13:14:57.174Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/privatekey [none]
[debug] [2023-08-31T13:14:57.625Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables 200
[debug] [2023-08-31T13:14:57.625Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables {"variables":[{"name":"projects/booking-hotel-25ea1/configs/mongodb/variables/uri","updateTime":"2023-08-30T07:08:05.232463980Z"}]}
[debug] [2023-08-31T13:14:57.625Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables/uri [none]
[debug] [2023-08-31T13:14:57.676Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/private_key 200
[debug] [2023-08-31T13:14:57.676Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/private_key {"name":"projects/booking-hotel-25ea1/configs/stripe/variables/private_key","updateTime":"2023-08-30T07:08:02.829569245Z","text":"sk_test_51NYoi5AndaV81xG1VJdCLTC9cRI0paqZz38AR9NE1TsOANlSR08dZsrxMoyyMLK9CMFXORBbf2PNmnXCLLtUTCQU00UhRj5nCb"}
[debug] [2023-08-31T13:14:57.765Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/privatekey 200
[debug] [2023-08-31T13:14:57.766Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/stripe/variables/privatekey {"name":"projects/booking-hotel-25ea1/configs/stripe/variables/privatekey","updateTime":"2023-08-30T07:29:25.941818845Z","text":"sk_test_51NYoi5AndaV81xG1VJdCLTC9cRI0paqZz38AR9NE1TsOANlSR08dZsrxMoyyMLK9CMFXORBbf2PNmnXCLLtUTCQU00UhRj5nCb"}
[debug] [2023-08-31T13:14:58.138Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables/uri 200
[debug] [2023-08-31T13:14:58.139Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/booking-hotel-25ea1/configs/mongodb/variables/uri {"name":"projects/booking-hotel-25ea1/configs/mongodb/variables/uri","updateTime":"2023-08-30T07:08:05.232463980Z","text":"mongodb+srv://boiketlo:wlAng9qDc0ZoIA8C@cluster0.jvdtm2c.mongodb.net/hotel?retryWrites=true&w=majority"}
[debug] [2023-08-31T13:14:58.143Z] Validating nodejs source
[debug] [2023-08-31T13:14:59.577Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "body-parser": "^1.20.2",
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "firebase-admin": "^11.8.0",
    "firebase-functions": "^4.3.1",
    "mongoose": "^7.5.0",
    "morgan": "^1.10.0",
    "strip": "^3.0.0",
    "stripe": "^13.3.0"
  },
  "devDependencies": {
    "@babel/plugin-proposal-private-property-in-object": "^7.21.11",
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2023-08-31T13:14:59.577Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2023-08-31T13:14:59.579Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-08-31T13:14:59.588Z] Found firebase-functions binary at 'C:\Users\Ristar\Desktop\Project\hotel-booking-app\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8611

[error] node:events:491
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use :::8000
    at Server.setupListenHandle [as _listen2] (node:net:1740:16)
    at listenInCluster (node:net:1788:12)
    at Server.listen (node:net:1876:7)
    at Function.listen (C:\Users\Ristar\Desktop\Project\hotel-booking-app\functions\node_modules\express\lib\application.js:635:24)
    at Object.<anonymous> (C:\Users\Ristar\Desktop\Project\hotel-booking-app\functions\index.js:251:5)
    at Module._compile (node:internal/modules/cjs/loader:1254:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1308:10)
    at Module.load (node:internal/modules/cjs/loader:1117:32)
    at Module._load (node:internal/modules/cjs/loader:958:12)
    at Module.require (node:internal/modules/cjs/loader:1141:19)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1767:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '::',
  port: 8000
}

Node.js v18.16.0

[debug] [2023-08-31T13:15:00.407Z] Failed to call quitquitquit. This often means the server failed to start request to http://localhost:8611/__/quitquitquit failed, reason: connect ECONNREFUSED ::1:8611 {"message":"request to http://localhost:8611/__/quitquitquit failed, reason: connect ECONNREFUSED ::1:8611","type":"system","errno":"ECONNREFUSED","code":"ECONNREFUSED"}
[debug] [2023-08-31T13:15:00.798Z] FetchError: request to http://127.0.0.1:8611/__/functions.yaml failed, reason: read ECONNRESET
    at ClientRequest.<anonymous> (C:\Users\Ristar\AppData\Roaming\npm\node_modules\firebase-tools\node_modules\node-fetch\lib\index.js:1501:11)
    at ClientRequest.emit (node:events:513:28)
    at ClientRequest.emit (node:domain:489:12)
    at Socket.socketErrorListener (node:_http_client:502:9)
    at Socket.emit (node:events:513:28)
    at Socket.emit (node:domain:489:12)
    at emitErrorNT (node:internal/streams/destroy:151:8)
    at emitErrorCloseNT (node:internal/streams/destroy:116:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)
[error] 
[error] Error: An unexpected error has occurred.
